using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

/************************************************************************************/
/// PlagueEngine.Rendering
/************************************************************************************/
namespace PlagueEngine.Rendering
{
    /********************************************************************************/
    /// Marker
    /********************************************************************************/
    class Marker
    {
        
        /****************************************************************************/
        /// Fields
        /****************************************************************************/
        public static Renderer renderer = null;

        public delegate Matrix GetWorldDelegate();
        private GetWorldDelegate getWorld = null;
        /****************************************************************************/


        /****************************************************************************/
        /// Constructor
        /****************************************************************************/
        public Marker(GetWorldDelegate getWorld,Vector3 position,bool enabled)
        {
            this.getWorld = getWorld;

            LocalPosition = position;
            Enabled       = enabled;

            renderer.Markers.Add(this);
        }
        /****************************************************************************/


        /****************************************************************************/
        /// Get World
        /****************************************************************************/
        public Vector3 GetPosition()
        {
            return Vector3.Transform(LocalPosition, getWorld());
        }
        /****************************************************************************/


        /****************************************************************************/
        /// Release Me
        /****************************************************************************/
        public void ReleaseMe()
        {
            renderer.Markers.Remove(this);
        }
        /****************************************************************************/


        /****************************************************************************/
        /// Properties
        /****************************************************************************/
        public Vector3 LocalPosition { get; set; }
        public bool    Enabled       { get; set; }
        /****************************************************************************/

    }
    /********************************************************************************/

}
/************************************************************************************/